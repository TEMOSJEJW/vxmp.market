<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Discord Widget</title>
<style>
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    background: #18191c;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    padding-top: 40px;
}

/* Widget container */
#discord-widget {
    width: 600px; /* wider widget */
    background: #2C2F33;
    color: white;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
}

/* Banner */
#discord-widget .banner img {
    width: 100%;
    height: 180px;
    object-fit: cover;
}

/* Header */
#discord-widget .header {
    display: flex;
    align-items: center;
    padding: 20px;
    background:#23272A;
}
#discord-widget .header img {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    margin-right: 20px;
    object-fit: cover;
}
#discord-widget .header h3 {
    margin: 0;
    font-size: 1.6em;
}
#discord-widget .header a {
    display: inline-block;
    margin-top: 8px;
    background:#7289DA;
    color:white;
    padding:6px 14px;
    border-radius:6px;
    text-decoration:none;
    font-size:0.9em;
    transition: background 0.2s;
}
#discord-widget .header a:hover {
    background: #5b6eae;
}

/* Stats */
#discord-widget .stats {
    display: flex;
    justify-content: space-around;
    padding: 20px;
    background: #2C2F33;
    border-bottom: 1px solid #3a3d42;
}
#discord-widget .stats .stat {
    text-align: center;
}
#discord-widget .stats .stat p {
    margin: 5px 0;
    font-weight: bold;
}
#discord-widget .stats .stat span {
    display: block;
    font-size: 1.1em;
}

/* Online Users List */
#online-users {
    list-style:none;
    padding:15px;
    max-height:300px;
    overflow-y:auto;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

/* Online user card */
.online-user {
    display: flex;
    align-items: center;
    background: #23272A;
    border-radius: 10px;
    padding: 8px 12px;
    flex: 1 1 calc(50% - 10px);
    transition: transform 0.2s, background 0.2s;
}
.online-user:hover {
    transform: scale(1.03);
    background: linear-gradient(90deg, #7289DA, #99AAB5);
}
.online-user img {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    margin-right: 10px;
    object-fit: cover;
}

/* Scrollbar */
#online-users::-webkit-scrollbar {
    width: 8px;
}
#online-users::-webkit-scrollbar-track {
    background: #2C2F33;
    border-radius: 4px;
}
#online-users::-webkit-scrollbar-thumb {
    background: #7289DA;
    border-radius: 4px;
}
#online-users::-webkit-scrollbar-thumb:hover {
    background: #5b6eae;
}

/* Loading shimmer */
@keyframes shimmer {0%{background-position:-400px 0}100%{background-position:400px 0}}
.loading {background:#3a3d42; background-image:linear-gradient(90deg,#3a3d42 0px,#4b4e53 40px,#3a3d42 80px); background-size:400px 100%; animation:shimmer 1.5s infinite linear; border-radius:6px; color:transparent;}
.loading-item {height:36px; width:100%; margin:6px 0; border-radius:8px; background:#3a3d42; background-image:linear-gradient(90deg,#3a3d42 0px,#4b4e53 40px,#3a3d42 80px); background-size:400px 100%; animation:shimmer 1.5s infinite linear;}
</style>
</head>
<body>

<div id="discord-widget">
    <!-- Banner -->
    <div class="banner">
        <img src="https://cdn.discordapp.com/attachments/1266739039172558901/1428690991002554478/05882c9f-f4d4-441a-b38d-6d52e8b2b195_showcase2.png?ex=68f36bac&is=68f21a2c&hm=a421f8a11e8e8f90369b8a1c8764a210fe6b62beea8f4ea6a88cb2c1ac3d3c49&" alt="Banner">
    </div>

    <!-- Header -->
    <div class="header">
        <img id="server-icon" src="" alt="Server Icon">
        <div>
            <h3 id="server-name" class="loading">Loading...</h3>
            <a id="server-link" href="#" target="_blank">Join Server</a>
        </div>
    </div>

    <!-- Stats -->
    <div class="stats">
        <div class="stat">
            <p>Total Members</p>
            <span id="members" class="loading">...</span>
        </div>
        <div class="stat">
            <p>Online Members</p>
            <span id="online" class="loading">...</span>
        </div>
    </div>

    <!-- Online Users -->
    <ul id="online-users">
        <li class="loading-item"></li>
        <li class="loading-item"></li>
        <li class="loading-item"></li>
        <li class="loading-item"></li>
    </ul>
</div>

<script>
const guildId = '1389215514198413425';
const widgetUrl = `https://discord.com/api/v9/guilds/${guildId}/widget.json`;

async function updateWidget() {
    try {
        const res = await fetch(widgetUrl);
        const data = await res.json();

        document.getElementById('server-name').innerText = data.name;
        document.getElementById('server-name').classList.remove('loading');
        document.getElementById('server-icon').src = data.icon_url || 'https://i.imgur.com/6VBx3io.png';
        document.getElementById('server-link').href = data.instant_invite;

        const totalMembers = data.members.length;
        const onlineMembers = data.members.filter(m => m.status !== "offline");

        document.getElementById('members').innerText = totalMembers;
        document.getElementById('members').classList.remove('loading');
        document.getElementById('online').innerText = onlineMembers.length;
        document.getElementById('online').classList.remove('loading');

        const onlineList = document.getElementById('online-users');
        onlineList.innerHTML = '';

        onlineMembers.forEach(member => {
            const li = document.createElement('li');
            li.className = 'online-user';

            const avatar = document.createElement('img');
            avatar.src = member.avatar_url || 'https://i.imgur.com/6VBx3io.png';

            const username = document.createElement('span');
            username.innerText = member.username;

            li.appendChild(avatar);
            li.appendChild(username);
            onlineList.appendChild(li);
        });

    } catch(err) {
        document.getElementById('discord-widget').innerHTML = '<p style="padding:20px;">Discord widget not available</p>';
    }
}

updateWidget();
setInterval(updateWidget, 30000);
</script>
</body>
</html>
